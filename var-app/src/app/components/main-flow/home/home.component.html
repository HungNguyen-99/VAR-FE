@if (homeFacade.vm$ | async; as vm){
    <div class="body">
        <app-floating-menu class="menu-bar" cdkDrag [screenUsing]="vm.screenType" (screenUsingOut)="homeFacade.switchScreen($event)"
            (playBackRateUsingOut)="homeFacade.playBackRateHls($event)" (setSpeedRo)="setSpeedRo($event)"
            (endTheMatchEvent)="homeFacade.endTheMatchEvent()">
        </app-floating-menu>
    
        <div class="content-4" *ngIf="vm.screenType === 'x4'">
            <div class="content-4__item" *ngFor="let video of vm.videoX4; let i = index">
                <app-mediamtx-video-player *ngIf="video  && displayComponent " [videoUrl]="video" [id]="i" [typeOfScreen]="vm.screenType" />
                <div class="err-container" *ngIf="!video">
                    <div class="error-camera">
                        <img src="assets/no-camera.png" alt="Error Camera" />
                    </div>
                </div>
            </div>
        </div>
    
        <div class="pagination" *ngIf="vm.screenType === 'x4'">
            <button (click)="homeFacade.previousVideoX4()"><</button>
            <button (click)="homeFacade.nextVideoX4()">></button>
        </div>
    
        <div class="content-9" *ngIf="vm.screenType === 'x9'">
            <div class="content-9__item" *ngFor="let video of vm.videos; let i = index">
                <app-mediamtx-video-player *ngIf="video  && displayComponent" [videoUrl]="video"
                    [id]="i" [typeOfScreen]="vm.screenType"></app-mediamtx-video-player>
    
                <div class="err-container" *ngIf="!video">
                    <div class="error-camera">
                        <img src="assets/no-camera.png" alt="Error Camera" />
                    </div>
                </div>
            </div>
        </div>
    
        <div class="container-1" *ngIf="vm.screenType === 'x1'">
            <div class="content-1">
                <div class="item-1" [ngClass]="indexForClassContainerX1 === i ? 'is-selected' : ''" #videoContainer
                    *ngFor="let video of vm.videosForOneView; let i = index" (click)="changeSourceVideoOne(i)">
                    <app-mediamtx-video-player *ngIf="video" [videoUrl]="video" [id]="i"></app-mediamtx-video-player>
                </div>
            </div>
            <div class="content-2">
                <div #videoContainer>
                    <app-mediamtx-video-player *ngIf="screen1"
                        [videoUrl]="vm.videosForOneView[indexForClassContainerX1]" [typeOfScreen]="vm.screenType"></app-mediamtx-video-player>
                </div>
            </div>
        </div>
        <div class="timeline">
            <div #controlsHls class="controls" (mousemove)="showTimeTooltipHls($event)" (mouseleave)="hideTimeTooltipHls()"
                (click)="homeFacade.seekVideoPlaybackHls($event, controlsHls.clientWidth)">
                <div class="progress" [style.width]="handleWidthOfTimeLineHls()">
                    <div *ngFor="let time of markedTimesHls" class="mark"
                        [style.left]="(time / getDurationHls()) * 100 + '%'">
                    </div>
                </div>
                <div #timeTooltipHls class="time-tooltip" [style.left]="tooltipPositionHls + 'px'">
                    {{ tooltipTimeHls }}
                </div>
            </div>
            <div class="time-display">
                <div style="cursor: pointer" (click)="controlAll('live')">
                    <div class="btn-live btn-live-on" *ngIf="vm.isLive"></div>
                    <div class="btn-live btn-live-off" *ngIf="!vm.isLive"></div>
                    {{ 'Trực tiếp' }}
                </div>
                <span class="live-duration"><span *ngIf="!vm.isLive">{{ translateCurrentTimeHls() }} / </span>{{
                    translateDurationHls() }}</span>
            </div>
        </div>
    </div>
}